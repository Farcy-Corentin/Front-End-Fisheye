(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{9340:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/photographer/[id]",function(){return __webpack_require__(374)}])},6498:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Avatar}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1527),next_image__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(281),next_image__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_1__),_styles_components_Avatar_module_scss__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9147),_styles_components_Avatar_module_scss__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_styles_components_Avatar_module_scss__WEBPACK_IMPORTED_MODULE_2__);function Avatar(param){let{src,alt,width,height}=param;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_1___default(),{className:_styles_components_Avatar_module_scss__WEBPACK_IMPORTED_MODULE_2___default().avatar,src:src,alt:alt,width:width,height:height,quality:90,priority:!0})})}},2295:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{D:function(){return PhotographerFactory}});class PhotographerFactory{static createPhotographer(photographerApi){if(void 0===photographerApi)throw Error("Il n'y a aucun photographe.");return{id:photographerApi.id,name:photographerApi.name,city:photographerApi.city,country:photographerApi.country,tagline:photographerApi.tagline,price:photographerApi.price,portrait:photographerApi.portrait}}static createPhotographerProfileView(photographer){var id,portrait;return{id:photographer.id,url:(id=photographer.id,"/photographer/".concat(id)),name:photographer.name,picture:(portrait=photographer.portrait,"/assets/photographers/".concat(portrait)),address:photographer.city+", "+photographer.country,tagline:photographer.tagline,formattedPrice:photographer.price+"€/jour"}}}},374:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__N_SSG:function(){return __N_SSG},default:function(){return Photographer}});var jsx_runtime=__webpack_require__(1527),PhotographerFactory=__webpack_require__(2295),head=__webpack_require__(1884),head_default=__webpack_require__.n(head),PhotographerHeader_module=__webpack_require__(5633),PhotographerHeader_module_default=__webpack_require__.n(PhotographerHeader_module),Avatar=__webpack_require__(6498),Button_module=__webpack_require__(9093),Button_module_default=__webpack_require__.n(Button_module);function Button(param){let{type="button",label,onClick}=param;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("button",{className:Button_module_default().contactButton,type:type,onClick:onClick,children:label})})}var lib=__webpack_require__(8869),lib_default=__webpack_require__.n(lib),react=__webpack_require__(959),Form_module=__webpack_require__(4345),Form_module_default=__webpack_require__.n(Form_module),icons_close={src:"/_next/static/media/close.3b919793.svg",height:42,width:42},next_image=__webpack_require__(281),image_default=__webpack_require__.n(next_image);function ContactFormModal(param){let{isOpen,setIsOpen,userName}=param,[firstname,setFirstname]=(0,react.useState)(""),[lastname,setLastname]=(0,react.useState)(""),[email,setEmail]=(0,react.useState)(""),[message,setMessage]=(0,react.useState)(""),handleSubmit=event=>{event.preventDefault(),console.log("firstname",firstname),console.log("lastname",lastname),console.log("email",email),console.log("message",message)};return(0,jsx_runtime.jsx)(lib_default(),{isOpen:isOpen,onRequestClose:()=>setIsOpen(!1),overlayClassName:Form_module_default().overlay,role:"dialog","aria-describedby":"contact modal",className:Form_module_default().modal,children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("header",{children:[(0,jsx_runtime.jsxs)("h2",{children:["Contactez-moi ",(0,jsx_runtime.jsx)("span",{children:userName})]}),(0,jsx_runtime.jsx)(image_default(),{src:icons_close,"aria-label":"Close contact Form",alt:"close modal icon",width:50,height:50,onClick:()=>setIsOpen(!1),tabIndex:0})]}),(0,jsx_runtime.jsxs)("form",{className:Form_module_default().form,onSubmit:handleSubmit,children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{htmlFor:"firstname",children:"Pr\xe9nom"}),(0,jsx_runtime.jsx)("input",{value:firstname,onChange:event=>setFirstname(event.target.value)})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{htmlFor:"lastname",children:"Nom"}),(0,jsx_runtime.jsx)("input",{value:lastname,onChange:event=>setLastname(event.target.value)})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{htmlFor:"email",children:"Email"}),(0,jsx_runtime.jsx)("input",{value:email,onChange:event=>setEmail(event.target.value)})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{htmlFor:"message",children:"Message"}),(0,jsx_runtime.jsx)("textarea",{value:message,onChange:event=>setMessage(event.target.value)})]}),(0,jsx_runtime.jsx)("button",{type:"submit",className:Button_module_default().contactButton,children:"Envoyer"})]})]})})}function PhotographerHeader(param){let{photographerProfileView}=param,[isOpenContactFormModal,setIsOpenContactFormModal]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("header",{className:PhotographerHeader_module_default().photographHeader,children:[(0,jsx_runtime.jsxs)("section",{children:[(0,jsx_runtime.jsx)("h1",{className:PhotographerHeader_module_default().title,children:photographerProfileView.name}),(0,jsx_runtime.jsx)("p",{className:PhotographerHeader_module_default().address,children:photographerProfileView.address}),(0,jsx_runtime.jsx)("p",{children:photographerProfileView.tagline})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(Button,{type:"button",label:"Contactez-moi",onClick:()=>setIsOpenContactFormModal(!0)}),(0,jsx_runtime.jsx)(ContactFormModal,{isOpen:isOpenContactFormModal,setIsOpen:setIsOpenContactFormModal,userName:photographerProfileView.name})]}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Avatar.Z,{src:photographerProfileView.picture,alt:photographerProfileView.name,width:200,height:200})})]})}lib_default().setAppElement("#__next");var Photographer_module=__webpack_require__(4021),Photographer_module_default=__webpack_require__.n(Photographer_module);function url(photographerId,url){return"/assets/images/".concat(photographerId,"/").concat(url)}class MediaFactory{static createMedia(mediaApi){return{id:mediaApi.id,photographerId:mediaApi.photographerId,title:mediaApi.title,componentType:mediaApi.image?"image":"video",url:mediaApi.image?url(mediaApi.photographerId,mediaApi.image):url(mediaApi.photographerId,mediaApi.video),like:mediaApi.likes,date:mediaApi.date,price:mediaApi.price}}static createPicture(media){return{id:media.id,photographerId:media.photographerId,title:media.title,url:media.url,like:media.like,date:media.date,price:media.price}}static createMovie(media){return{id:media.id,photographerId:media.photographerId,title:media.title,url:media.url,like:media.like,date:media.date,price:media.price}}}var MediaCard_module=__webpack_require__(4050),MediaCard_module_default=__webpack_require__.n(MediaCard_module),next_link=__webpack_require__(6939),link_default=__webpack_require__.n(next_link),next_router=__webpack_require__(6554),index_esm=__webpack_require__(4480);function Like(param){let{like,likeCounterChange}=param,{isLike,likeCounter,handleClick}=function(like){let[likeCounter,setLikeCounter]=(0,react.useState)(like),[isLike,setIsLike]=(0,react.useState)(!1),handleClick=()=>{setLikeCounter(likeCounter+(isLike?-1:1)),setIsLike(!isLike)};return{likeCounter,isLike,handleClick}}(like),HeartIcon=isLike?index_esm.$0H:index_esm.BgW;return(0,react.useEffect)(()=>{likeCounterChange(likeCounter)},[likeCounter]),(0,jsx_runtime.jsxs)("p",{className:MediaCard_module_default().like,children:[likeCounter,(0,jsx_runtime.jsx)("button",{className:Button_module_default().likeBtn,onClick:handleClick,tabIndex:0,children:(0,jsx_runtime.jsx)(HeartIcon,{size:18,"aria-label":"likes"})})]})}function MediaCard(param){let{media,onLikeChange}=param,router=(0,next_router.useRouter)();if("image"===media.componentType){let picture=MediaFactory.createPicture(media);return(0,jsx_runtime.jsxs)("div",{className:MediaCard_module_default().mediaCard,children:[(0,jsx_runtime.jsx)(link_default(),{href:"/photographer/".concat(router.query.id,"?media=").concat(media.id),as:"/photographer/".concat(router.query.id,"?media=").concat(media.id),children:(0,jsx_runtime.jsx)(image_default(),{className:MediaCard_module_default().img,src:picture.url,alt:picture.title,width:350,height:300})}),(0,jsx_runtime.jsxs)("div",{className:MediaCard_module_default().content,children:[(0,jsx_runtime.jsx)("p",{children:picture.title}),(0,jsx_runtime.jsx)(Like,{likeCounterChange(like){picture.like=like,onLikeChange(picture)},like:picture.like})]})]})}let video=MediaFactory.createMovie(media);return(0,jsx_runtime.jsxs)("div",{className:MediaCard_module_default().mediaCard,children:[(0,jsx_runtime.jsx)(link_default(),{href:"/photographer/".concat(router.query.id,"?media=").concat(media.id),children:(0,jsx_runtime.jsx)("video",{className:MediaCard_module_default().video,src:video.url})}),(0,jsx_runtime.jsxs)("div",{className:MediaCard_module_default().content,children:[(0,jsx_runtime.jsx)("p",{children:video.title}),(0,jsx_runtime.jsx)(Like,{likeCounterChange(like){video.like=like,onLikeChange(video)},like:video.like})]})]})}var Dropdown_module=__webpack_require__(8962),Dropdown_module_default=__webpack_require__.n(Dropdown_module),useLocalStorage=__webpack_require__(7998),Lightbox_module=__webpack_require__(11),Lightbox_module_default=__webpack_require__.n(Lightbox_module),Combination=__webpack_require__(2958);function LightboxMedia(param){var ref,ref1;let{media,mediaIndex}=param,mediaLightbox=(null===(ref=media[mediaIndex])||void 0===ref?void 0:ref.componentType)==="image"?MediaFactory.createPicture(media[mediaIndex]):MediaFactory.createMovie(media[mediaIndex]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(null===(ref1=media[mediaIndex])||void 0===ref1?void 0:ref1.componentType)==="image"?(0,jsx_runtime.jsx)(image_default(),{src:mediaLightbox.url,alt:mediaLightbox.title,fill:!0,priority:!0,style:{objectFit:"cover"}}):(0,jsx_runtime.jsx)("video",{src:mediaLightbox.url,controls:!0}),(0,jsx_runtime.jsx)("p",{className:Lightbox_module_default().title,children:mediaLightbox.title})]})}function Lightbox(){let router=(0,next_router.useRouter)(),photographerId=router.query.id,mediaId=router.query.media,[media,setMedia]=(0,react.useState)([]),[isLoading,setIsLoading]=(0,react.useState)(!1),prevBtn=(0,react.useRef)(null),nextBtn=(0,react.useRef)(null),{mediaIndex,setMediaIndex,prev,next}=function(prevBtn,nextBtn){let[mediaIndex,setMediaIndex]=(0,react.useState)(0),prev=async media=>{var ref;console.log("prev",prevBtn),null==prevBtn||null===(ref=prevBtn.current)||void 0===ref||ref.focus(),setMediaIndex(0===mediaIndex?media.length-1:mediaIndex-1)},next=async media=>{var ref;null==nextBtn||null===(ref=nextBtn.current)||void 0===ref||ref.focus();let isNextMedia=mediaIndex===media.length-1;setMediaIndex(isNextMedia?0:mediaIndex+1)};return{mediaIndex,setMediaIndex,prev,next}}(prevBtn,nextBtn),fetchMedia=async()=>{setIsLoading(!0);let photographerId=parseInt(router.query.id),currentFilterName=localStorage.getItem("name")?localStorage.getItem("name"):"title",response=await fetch("/api/photographer/".concat(photographerId,"/media?filter=").concat(currentFilterName)),data=await response.json(),mediaData=data.map(MediaFactory.createMedia);setMedia(mediaData),setMediaIndex(mediaData.findIndex(media=>media.id===parseInt(mediaId))),setIsLoading(!1)},[hasMounted,setHasMounted]=(0,react.useState)(!1);(0,react.useEffect)(()=>{setHasMounted(!0)},[]),(0,react.useEffect)(()=>{fetchMedia()},[]),(0,react.useEffect)(()=>{var ref;let mediaId=null===(ref=media[mediaIndex])||void 0===ref?void 0:ref.id;void 0!==mediaId&&router.push("/photographer/".concat(photographerId,"/?media=").concat(mediaId)).then()},[media,mediaIndex]);let onDocumentKeyup=(0,react.useCallback)(async event=>{"ArrowLeft"===event.key&&await prev(media),"ArrowRight"===event.key&&await next(media)},[media,next,prev]);return((0,react.useEffect)(()=>(document.addEventListener("keyup",onDocumentKeyup),()=>{document.removeEventListener("keyup",onDocumentKeyup)}),[onDocumentKeyup]),!hasMounted||isLoading)?null:(0,jsx_runtime.jsx)(Combination.Y,{onEscapeKey:async()=>await router.push("/photographer/".concat(photographerId)),children:(0,jsx_runtime.jsxs)("div",{className:Lightbox_module_default().overlay,role:"dialog","aria-modal":"true",children:[(0,jsx_runtime.jsx)(link_default(),{className:Lightbox_module_default().closeBtn,href:"/photographer/".concat(photographerId),children:(0,jsx_runtime.jsx)(index_esm.aHS,{})}),(0,jsx_runtime.jsx)("button",{className:Lightbox_module_default().previousBtn,onClick:()=>prev(media).then(),ref:prevBtn,children:(0,jsx_runtime.jsx)(index_esm.bUI,{})}),(0,jsx_runtime.jsx)("div",{className:Lightbox_module_default().content,children:(0,jsx_runtime.jsx)(LightboxMedia,{media:media,mediaIndex:mediaIndex})}),(0,jsx_runtime.jsx)("button",{className:Lightbox_module_default().nextBtn,onClick:()=>next(media).then(),ref:nextBtn,children:(0,jsx_runtime.jsx)(index_esm.Dli,{})})]})})}var LikeByPhotographer_module=__webpack_require__(6655),LikeByPhotographer_module_default=__webpack_require__.n(LikeByPhotographer_module);function LikesByPhotographer(param){let{totalLike}=param,[photographerPrice,setPhotographerPrice]=(0,react.useState)(0),router=(0,next_router.useRouter)(),getPhotographerPrice=async()=>{let photographerId=router.query.id,response=await fetch("/api/photographer/".concat(photographerId)),data=await response.json();setPhotographerPrice(PhotographerFactory.D.createPhotographer(data).price)};return(0,react.useEffect)(()=>{getPhotographerPrice()},[getPhotographerPrice()]),(0,jsx_runtime.jsxs)("div",{className:LikeByPhotographer_module_default().LikeBox,children:[(0,jsx_runtime.jsxs)("p",{children:[totalLike," ",(0,jsx_runtime.jsx)(index_esm.$0H,{size:18})]}),(0,jsx_runtime.jsxs)("p",{children:[photographerPrice,"€/jour"]})]})}function MediaGrid(){let[open,setOpen]=(0,react.useState)(!1),[sortedMedia,setSortedMedia]=(0,react.useState)([]),[currentFilterName,setCurrentFilterName]=(0,useLocalStorage.Z)("name","date"),[currentFilterFr,setCurrentFilterFr]=(0,useLocalStorage.Z)("fr","Date"),router=(0,next_router.useRouter)();(0,react.useEffect)(()=>{filteringMedia()},[currentFilterName]);let filteringMedia=async()=>{let photographerId=parseInt(router.query.id),response=await fetch("/api/photographer/".concat(photographerId,"/media?filter=").concat(currentFilterName)),data=await response.json(),sortedMedia=data.map(MediaFactory.createMedia);setSortedMedia(sortedMedia)},totalMediaLike=(0,react.useMemo)(()=>sortedMedia.reduce((acc,curr)=>acc+curr.like,0),[sortedMedia]),handleLikeChange=media=>{setSortedMedia(sortedMedia.map(m=>m.id===media.id?{...m,...media}:m))},[hasMounted,setHasMounted]=(0,react.useState)(!1);return((0,react.useEffect)(()=>{setHasMounted(!0)},[]),hasMounted)?router.query.media?(0,jsx_runtime.jsx)(Lightbox,{}):(0,jsx_runtime.jsxs)("div",{className:Photographer_module_default().mediaSection,children:[(0,jsx_runtime.jsxs)("div",{className:Photographer_module_default().filterSection,children:[(0,jsx_runtime.jsx)("div",{className:Photographer_module_default().label,children:(0,jsx_runtime.jsx)("p",{className:Photographer_module_default().title,children:"Trier par"})}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("button",{tabIndex:0,role:"menu",className:Button_module_default().dropdownButton,onClick:()=>setOpen(!open),onKeyUp(event){"Escape"===event.key&&setOpen(!1)},children:[currentFilterFr,open?(0,jsx_runtime.jsx)(index_esm.$Pg,{}):(0,jsx_runtime.jsx)(index_esm.iUH,{})]}),open&&(0,jsx_runtime.jsx)("ul",{className:Dropdown_module_default().menu,children:[{name:"popularity",fr:"Popularit\xe9"},{name:"title",fr:"Titre"},{name:"date",fr:"Date"}].filter(filter=>filter.fr!==currentFilterFr).map(filter=>(0,jsx_runtime.jsx)("li",{role:"menuitem",tabIndex:0,onClick(){setCurrentFilterName(filter.name),setCurrentFilterFr(filter.fr),router.push("".concat(router.query.id,"?filter=").concat(filter.name)),setOpen(!1)},onKeyUp(event){if("Escape"===event.key){setOpen(!1);let dropdownBtn=document.querySelector(".".concat(Button_module_default().dropdownButton));dropdownBtn.focus()}if("Enter"===event.key){setCurrentFilterName(filter.name),setCurrentFilterFr(filter.fr),router.push("".concat(router.query.id,"?filter=").concat(filter.name));let dropdownBtn1=document.querySelector(".".concat(Button_module_default().dropdownButton));dropdownBtn1.focus(),setOpen(!1)}},children:filter.fr},filter.name))})]})]}),(0,jsx_runtime.jsx)("div",{className:Photographer_module_default().mediaGrid,children:sortedMedia?sortedMedia.map(media=>(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(MediaCard,{onLikeChange:handleLikeChange,media:media})},media.id)):""}),(0,jsx_runtime.jsx)(LikesByPhotographer,{totalLike:totalMediaLike})]}):null}var __N_SSG=!0;function Photographer(param){let{photographer}=param,photographerProfileView=PhotographerFactory.D.createPhotographerProfileView(photographer);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(head_default(),{children:(0,jsx_runtime.jsx)("title",{children:"Fisheye - photographe"})}),(0,jsx_runtime.jsx)(PhotographerHeader,{photographerProfileView:photographerProfileView}),(0,jsx_runtime.jsx)(MediaGrid,{})]})}},9147:function(module){module.exports={avatar:"Avatar_avatar__HCqPs"}},9093:function(module){module.exports={button:"Button_button__zojcg",contactButton:"Button_contactButton__wS6jz",dropdownButton:"Button_dropdownButton__y_Fzq",likeBtn:"Button_likeBtn__WckMQ"}},8962:function(module){module.exports={button:"Dropdown_button__yvYDi",menu:"Dropdown_menu__jZSNH",contactButton:"Dropdown_contactButton__Z4ckd",dropdownButton:"Dropdown_dropdownButton__MKrit",likeBtn:"Dropdown_likeBtn__dLwfZ"}},4345:function(module){module.exports={overlay:"Form_overlay__lv4F4",modal:"Form_modal__07sP0",form:"Form_form__LUGza"}},11:function(module){module.exports={overlay:"Lightbox_overlay__ARkC7",content:"Lightbox_content__UEsga",closeBtn:"Lightbox_closeBtn__26lqs",previousBtn:"Lightbox_previousBtn__k0Lb6",nextBtn:"Lightbox_nextBtn__iuk7E",title:"Lightbox_title__lIZAA"}},6655:function(module){module.exports={LikeBox:"LikeByPhotographer_LikeBox__jLK_z","fade-up":"LikeByPhotographer_fade-up__xv3ep"}},4050:function(module){module.exports={mediaCard:"MediaCard_mediaCard__0qcPW",img:"MediaCard_img__Mx0Um",video:"MediaCard_video__mx24L",like:"MediaCard_like__XOsKy",content:"MediaCard_content__Wjo5n"}},5633:function(module){module.exports={photographHeader:"PhotographerHeader_photographHeader__gmgZ1",title:"PhotographerHeader_title__K0jPi",address:"PhotographerHeader_address__MWGvg"}},4021:function(module){module.exports={mediaSection:"Photographer_mediaSection__FrUFk",mediaGrid:"Photographer_mediaGrid__L7O1x",filterSection:"Photographer_filterSection__kFAEQ",label:"Photographer_label__n4pFm",title:"Photographer_title__P9CN5"}}},function(__webpack_require__){__webpack_require__.O(0,[636,953,774,888,179],function(){return __webpack_require__(__webpack_require__.s=9340)}),_N_E=__webpack_require__.O()}]);